## Развертывание:

1.  Запустить постгрес
2.  Создать базу
3.  Выполнить скрипт dump-postgres-202305301456.sql
4.  В .env указать порт на котором работает постргрес поле DB_PORT,
    указать имя базы в поле DB_NAME и при необходимости там же указать
    хост, юзера и пароль для него, и порт для этого сервера
5.  В консоли, будучи в папке с проектом, прописать `npm run start`

## Проверка кейсов:

_(используя постман, курл или любой другой клиент)_
_Не создавая ничего нового можно пользоваться следующими данными из дампа bookingId: 1-7, clientId: 1-3, rooms: 1-6_

#### Клиент может увидеть список номеров в отеле

Выполнить `GET` на `'host:port/api/rooms'` for example `localhost:3021/api/rooms`

в результате выполнения отдаст

> 200

    {
    "count": NUM - число записей (номеров),
    "rows": ARRAY - массив записей (номеров)
    }

#### Клиент может увидеть список свободных номеров в отеле на определенный период времени

выполнить `GET` на `'host:port/api/rooms/free?dateAt=ISOTimestamp&dateTo=ISOTimestamp'` for example `localhost:3021/api/rooms/free?dateAt=2023-05-01T15:23:54.846Z&dateTo=2023-05-15T15:23:54.846Z`

где `dateAt` and `dateTo` время, на которое клиент ищет свободный номер в формате YYYY-MM-DDTHH:MM:SS.MSZ (специфичность не указана, использовал самый простой вариант)
в результате выполнения отдаст

> 200

    Массив номеров свободных на этот временной диапазон

#### Клиент может забронировать номер в отеле на определенный срок

выполнить `POST` на `'host:port/api/bookings/'` for example `localhost:3021/api/bookings/`

В теле запроса обязательно передать `"clientId": NUMBER, "roomId": NUMBER, "dateAT": ISOTimestamp (like 2023-05-15T15:23:54.846Z), "dateTo": ISOTimestamp (like 2023-05-15T15:23:54.846Z)`

В случае успеха (т.е. номер на выбранные даты НЕ занят) вернется

> 200

и информация по этой заявке включая является ли заявка от випа в формате

     {
    "isActive": true,
    "id": 6,
    "clientId": 1,
    "roomId": 2,
    "dateAt": "2023-03-15T11:52:57.196Z",
    "dateTo": "2023-03-20T12:53:32.785Z",
    "isVip": true,
    "updatedAt": "2023-05-30T15:53:37.416Z",
    "createdAt": "2023-05-30T15:53:37.416Z"
    }

В случае неуспеха (т.е. номер на выбранные даты занят) вернется

> 409

и

    {
    "message": "roomId такой-то is not availibe for this dates by next bookingId: список айдишников заявок"
    }

#### Клиент может отменить бронь номера в отеле

выполнить `PUT` на `'host:port/api/bookings/abort'` for example `localhost:3021/api/bookings/abort`

В теле запроса обязательно указать `bookingId` который хотим отменить, в результате вернет

> 200

и `{
 message: success
 }`

#### Клиент может быть VIP а может и не быть (запрос удаленного api сервера для проверки) Необходимо фиксировать информацию в бронь

При создании заявки происходит проверка на апи (сейчас просто random-data-api) по результату рандома он становится вип/невип

#### 2 клиента не могут одновременно забронировать один и тот же номер в отеле на пересекающиеся периоды

Реализовано при бронировании (перед созданием записи происходит проверка на пересечение)

## Доп.маршруты

api/clients GET (список пользователей) 200

api/clients POST BODY {"name": STRING} (создание пользователя) 201

api/rooms POST BODY {?description: STRING, ?level: NUMBER} (создание номера) 201

api/bookings GET (список заявок) 200
